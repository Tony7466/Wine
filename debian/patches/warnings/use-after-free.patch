description: do not use pointers after calling realloc (gcc 12 -Wuse-after-free)
author: Michael Gilbert <mgilbert@debian.org>

--- a/dlls/winex11.drv/clipboard.c
+++ b/dlls/winex11.drv/clipboard.c
@@ -1867,8 +1867,8 @@ static BOOL X11DRV_CLIPBOARD_GetProperty
         if (!*data)
         {
             XFree( buffer );
-            free( val );
-            return FALSE;
+            ERR("realloc failed (out of memory)");
+            _exit( 1 );
         }
         val = *data;
         memcpy( (int *)val + pos, buffer, count );
--- a/dlls/d3drm/texture.c
+++ b/dlls/d3drm/texture.c
@@ -141,7 +141,7 @@ static BOOL d3drm_image_palettise(D3DRMI
     image->blue_mask = 0xff;
     image->palette_size = colour_count;
     if (!(image->palette = realloc(palette, colour_count * sizeof(*palette))))
-        image->palette = palette;
+        return FALSE;
 
     return TRUE;
 }
