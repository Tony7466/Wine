description: build using system zlib
author: Michael Gilbert <mgilbert@debian.org>

--- a/dlls/cabinet/Makefile.in
+++ b/dlls/cabinet/Makefile.in
@@ -1,9 +1,10 @@
+EXTRALIBS = $(Z_LIBS)
+EXTRAINCL = $(Z_CFLAGS)
 MODULE    = cabinet.dll
 IMPORTLIB = cabinet
 
 C_SRCS = \
 	cabinet_main.c \
-	deflate.c \
 	fci.c \
 	fdi.c
 
--- a/dlls/opcservices/Makefile.in
+++ b/dlls/opcservices/Makefile.in
@@ -1,9 +1,10 @@
+EXTRALIBS = $(Z_LIBS)
+EXTRAINCL = $(Z_CFLAGS)
 MODULE  = opcservices.dll
 IMPORTS = uuid ole32 advapi32 urlmon xmllite oleaut32
 
 C_SRCS = \
 	compress.c \
-	deflate.c \
 	factory.c \
 	package.c \
 	uri.c
--- a/dlls/wininet/Makefile.in
+++ b/dlls/wininet/Makefile.in
@@ -1,4 +1,6 @@
 EXTRADEFS = -D_WINX32_
+EXTRALIBS = $(Z_LIBS)
+EXTRAINCL = $(Z_CFLAGS)
 MODULE    = wininet.dll
 IMPORTLIB = wininet
 IMPORTS   = mpr shlwapi shell32 user32 ws2_32 advapi32
@@ -10,7 +12,6 @@ C_SRCS = \
 	ftp.c \
 	gopher.c \
 	http.c \
-	inflate.c \
 	internet.c \
 	netconnection.c \
 	urlcache.c \
--- a/dlls/cabinet/fci.c
+++ b/dlls/cabinet/fci.c
@@ -34,6 +34,7 @@ There is still some work to be done:
 
 #include "config.h"
 
+#include <zlib.h>
 #include <assert.h>
 #include <stdarg.h>
 #include <stdio.h>
@@ -44,7 +45,6 @@ There is still some work to be done:
 #include "winerror.h"
 #include "winternl.h"
 #include "fci.h"
-#include "zlib.h"
 #include "cabinet.h"
 #include "wine/list.h"
 #include "wine/debug.h"
--- a/dlls/opcservices/compress.c
+++ b/dlls/opcservices/compress.c
@@ -20,6 +20,7 @@
 
 #include "config.h"
 
+#include <zlib.h>
 #include <stdarg.h>
 
 #include "windef.h"
@@ -27,7 +28,6 @@
 #include "msopc.h"
 
 #include "opc_private.h"
-#include "zlib.h"
 
 #include "wine/debug.h"
 #include "wine/heap.h"
--- a/dlls/wininet/http.c
+++ b/dlls/wininet/http.c
@@ -29,6 +29,7 @@
 
 #include "config.h"
 
+#include <zlib.h>
 #include <stdlib.h>
 
 #include "winsock2.h"
@@ -55,7 +56,6 @@
 #include "winuser.h"
 
 #include "internet.h"
-#include "zlib.h"
 #include "wine/debug.h"
 #include "wine/exception.h"
 #include "wine/unicode.h"
