description: revert upstream msvcrt commit df2521bff234acb049e2fb534e6ad1dfe6cf5d45

--- a/dlls/cabinet/Makefile.in
+++ b/dlls/cabinet/Makefile.in
@@ -1,8 +1,6 @@
 MODULE    = cabinet.dll
 IMPORTLIB = cabinet
 
-EXTRADLLFLAGS = -mno-cygwin
-
 C_SRCS = \
 	cabinet_main.c \
 	deflate.c \
--- a/dlls/cabinet/cabinet.h
+++ b/dlls/cabinet/cabinet.h
@@ -29,6 +29,27 @@
 #include "fdi.h"
 #include "fci.h"
 
+/* from msvcrt/sys/stat.h */
+#define _S_IWRITE 0x0080
+#define _S_IREAD  0x0100
+
+/* from msvcrt/fcntl.h */
+#define _O_RDONLY      0
+#define _O_WRONLY      1
+#define _O_RDWR        2
+#define _O_ACCMODE     (_O_RDONLY|_O_WRONLY|_O_RDWR)
+#define _O_APPEND      0x0008
+#define _O_RANDOM      0x0010
+#define _O_SEQUENTIAL  0x0020
+#define _O_TEMPORARY   0x0040
+#define _O_NOINHERIT   0x0080
+#define _O_CREAT       0x0100
+#define _O_TRUNC       0x0200
+#define _O_EXCL        0x0400
+#define _O_SHORT_LIVED 0x1000
+#define _O_TEXT        0x4000
+#define _O_BINARY      0x8000
+
 #define CAB_SPLITMAX (10)
 
 #define CAB_SEARCH_SIZE (32*1024)
--- a/dlls/cabinet/cabinet_main.c
+++ b/dlls/cabinet/cabinet_main.c
@@ -18,10 +18,11 @@
  * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA
  */
 
+#include "config.h"
+
 #include <assert.h>
 #include <stdarg.h>
 #include <string.h>
-#include <fcntl.h>
 
 #include "windef.h"
 #include "winbase.h"
--- a/dlls/cabinet/fci.c
+++ b/dlls/cabinet/fci.c
@@ -30,12 +30,14 @@ There is still some work to be done:
 
 */
 
+
+
+#include "config.h"
+
 #include <assert.h>
 #include <stdarg.h>
 #include <stdio.h>
 #include <string.h>
-#include <sys/stat.h>
-#include <fcntl.h>
 
 #include "windef.h"
 #include "winbase.h"
--- a/dlls/cabinet/fdi.c
+++ b/dlls/cabinet/fdi.c
@@ -58,10 +58,10 @@
  *   -gmt
  */
 
+#include "config.h"
+
 #include <stdarg.h>
 #include <stdio.h>
-#include <sys/stat.h>
-#include <fcntl.h>
 
 #include "windef.h"
 #include "winbase.h"
