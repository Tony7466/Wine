description: fix path to freetype headers
author: Michael Gilbert <mgilbert@debian.org>
Index: wine/configure.ac
===================================================================
--- wine.orig/configure.ac	2013-11-30 03:19:59.000000000 +0000
+++ wine/configure.ac	2013-11-30 04:00:38.265187025 +0000
@@ -1471,26 +1471,26 @@
     if test "$ft_lib" = "yes"
     then
 	AC_CHECK_HEADERS(ft2build.h \
-                         freetype/freetype.h \
-                         freetype/ftglyph.h \
-                         freetype/fttypes.h \
-                         freetype/tttables.h \
-                         freetype/ftsnames.h \
-                         freetype/ttnameid.h \
-                         freetype/ftoutln.h \
-                         freetype/ftwinfnt.h \
-                         freetype/ftmodapi.h \
-                         freetype/ftlcdfil.h,,,
+                         freetype.h \
+                         ftglyph.h \
+                         fttypes.h \
+                         tttables.h \
+                         ftsnames.h \
+                         ttnameid.h \
+                         ftoutln.h \
+                         ftwinfnt.h \
+                         ftmodapi.h \
+                         ftlcdfil.h,,,
                          [#ifdef HAVE_FT2BUILD_H
                           # include <ft2build.h>
                           #endif])
 	AC_PREPROC_IFELSE([AC_LANG_SOURCE([[#include <ft2build.h>
-                    #include <freetype/fttrigon.h>]])],[AC_DEFINE(HAVE_FREETYPE_FTTRIGON_H, 1,
-          [Define if you have the <freetype/fttrigon.h> header file.])
+                    #include <fttrigon.h>]])],[AC_DEFINE(HAVE_FTTRIGON_H, 1,
+          [Define if you have the <fttrigon.h> header file.])
                     wine_cv_fttrigon=yes],[wine_cv_fttrigon=no])
-        AC_CHECK_TYPES(FT_TrueTypeEngineType,,,[#include <freetype/ftmodapi.h>])
-	dnl Check that we have at least freetype/freetype.h
-	if test "$ac_cv_header_freetype_freetype_h" = "yes" -a "$wine_cv_fttrigon" = "yes"
+        AC_CHECK_TYPES(FT_TrueTypeEngineType,,,[#include <ftmodapi.h>])
+	dnl Check that we have at least freetype.h
+	if test "$ac_cv_header_freetype_h" = "yes" -a "$wine_cv_fttrigon" = "yes"
 	then
 	    AC_DEFINE(HAVE_FREETYPE, 1, [Define if FreeType 2 is installed])
         else
@@ -1501,9 +1501,9 @@
     fi
     CPPFLAGS="$ac_save_CPPFLAGS"
 fi
-WINE_ERROR_WITH(freetype,[test "x$ac_cv_header_freetype_freetype_h" != xyes -o "x$wine_cv_fttrigon" != xyes],
+WINE_ERROR_WITH(freetype,[test "x$ac_cv_header_freetype_h" != xyes -o "x$wine_cv_fttrigon" != xyes],
                 [FreeType ${notice_platform}development files not found. Fonts will not be built.])
-test "x$ac_cv_header_freetype_freetype_h" = xyes -a "x$wine_cv_fttrigon" = xyes || enable_fonts=${enable_fonts:-no}
+test "x$ac_cv_header_freetype_h" = xyes -a "x$wine_cv_fttrigon" = xyes || enable_fonts=${enable_fonts:-no}
 
 dnl **** Check for parport (currently Linux only) ****
 AC_CACHE_CHECK([for parport header/ppdev.h], ac_cv_c_ppdev,
Index: wine/dlls/gdi32/freetype.c
===================================================================
--- wine.orig/dlls/gdi32/freetype.c	2013-11-30 03:45:43.313189225 +0000
+++ wine/dlls/gdi32/freetype.c	2013-11-30 04:01:17.397186929 +0000
@@ -98,38 +98,38 @@
 #ifdef HAVE_FT2BUILD_H
 #include <ft2build.h>
 #endif
-#ifdef HAVE_FREETYPE_FREETYPE_H
-#include <freetype/freetype.h>
+#ifdef HAVE_FREETYPE_H
+#include <freetype.h>
 #endif
-#ifdef HAVE_FREETYPE_FTGLYPH_H
-#include <freetype/ftglyph.h>
+#ifdef HAVE_FTGLYPH_H
+#include <ftglyph.h>
 #endif
-#ifdef HAVE_FREETYPE_TTTABLES_H
-#include <freetype/tttables.h>
+#ifdef HAVE_TTTABLES_H
+#include <tttables.h>
 #endif
-#ifdef HAVE_FREETYPE_FTTYPES_H
-#include <freetype/fttypes.h>
+#ifdef HAVE_FTTYPES_H
+#include <fttypes.h>
 #endif
-#ifdef HAVE_FREETYPE_FTSNAMES_H
-#include <freetype/ftsnames.h>
+#ifdef HAVE_FTSNAMES_H
+#include <ftsnames.h>
 #endif
-#ifdef HAVE_FREETYPE_TTNAMEID_H
-#include <freetype/ttnameid.h>
+#ifdef HAVE_TTNAMEID_H
+#include <ttnameid.h>
 #endif
-#ifdef HAVE_FREETYPE_FTOUTLN_H
-#include <freetype/ftoutln.h>
+#ifdef HAVE_FTOUTLN_H
+#include <ftoutln.h>
 #endif
-#ifdef HAVE_FREETYPE_FTTRIGON_H
-#include <freetype/fttrigon.h>
+#ifdef HAVE_FTTRIGON_H
+#include <fttrigon.h>
 #endif
-#ifdef HAVE_FREETYPE_FTWINFNT_H
-#include <freetype/ftwinfnt.h>
+#ifdef HAVE_FTWINFNT_H
+#include <ftwinfnt.h>
 #endif
-#ifdef HAVE_FREETYPE_FTMODAPI_H
-#include <freetype/ftmodapi.h>
+#ifdef HAVE_FTMODAPI_H
+#include <ftmodapi.h>
 #endif
-#ifdef HAVE_FREETYPE_FTLCDFIL_H
-#include <freetype/ftlcdfil.h>
+#ifdef HAVE_FTLCDFIL_H
+#include <ftlcdfil.h>
 #endif
 
 #ifndef HAVE_FT_TRUETYPEENGINETYPE
@@ -184,7 +184,7 @@
 MAKE_FUNCPTR(FT_Vector_Transform);
 MAKE_FUNCPTR(FT_Vector_Unit);
 static FT_TrueTypeEngineType (*pFT_Get_TrueType_Engine_Type)(FT_Library);
-#ifdef HAVE_FREETYPE_FTLCDFIL_H
+#ifdef HAVE_FTLCDFIL_H
 static FT_Error (*pFT_Library_SetLcdFilter)(FT_Library, FT_LcdFilter);
 #endif
 
@@ -922,7 +922,7 @@
 
 static BOOL is_subpixel_rendering_enabled( void )
 {
-#ifdef HAVE_FREETYPE_FTLCDFIL_H
+#ifdef HAVE_FTLCDFIL_H
     static int enabled = -1;
     if (enabled == -1)
     {
@@ -3910,7 +3910,7 @@
 #undef LOAD_FUNCPTR
     /* Don't warn if these ones are missing */
     pFT_Get_TrueType_Engine_Type = wine_dlsym(ft_handle, "FT_Get_TrueType_Engine_Type", NULL, 0);
-#ifdef HAVE_FREETYPE_FTLCDFIL_H
+#ifdef HAVE_FTLCDFIL_H
     pFT_Library_SetLcdFilter = wine_dlsym(ft_handle, "FT_Library_SetLcdFilter", NULL, 0);
 #endif
 
@@ -6653,7 +6653,7 @@
     case WINE_GGO_HBGR_BITMAP:
     case WINE_GGO_VRGB_BITMAP:
     case WINE_GGO_VBGR_BITMAP:
-#ifdef HAVE_FREETYPE_FTLCDFIL_H
+#ifdef HAVE_FTLCDFIL_H
       {
         switch (ft_face->glyph->format)
         {
